function loadAjaxPost(e,t,n){var a={beforeSend:function(){},success:function(){}};$.extend(a,n),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:e,data:t,beforeSend:function(){a.beforeSend()},success:function(e){a.success(e)},error:function(e){notificate("Thông báo","Có lỗi xảy ra. Vui lòng thử lại!",[{btn:"red",text:"Đóng",attr:"data-popup_close"}])}})}function loadAjax(e,t,n,a=!0){var o={beforeSend:function(){},success:function(){}};$.extend(o,n),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:e,data:t,beforeSend:function(){a&&$("#loading_box").css({visibility:"visible",opacity:0}).animate({opacity:1},200),o.beforeSend()},success:function(e){a&&$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")}),o.success(e)},error:function(e){a&&$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")}),notificate("Thông báo","Có lỗi xảy ra. Vui lòng thử lại!",[{btn:"red",text:"Đóng",attr:"data-popup_close"}])}})}function loadAjaxGet(e,t){var n={beforeSend:function(){},success:function(){}};$.extend(n,t),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"GET",url:e,beforeSend:function(){$("#loading_box").css({visibility:"visible",opacity:0}).animate({opacity:1},200),n.beforeSend()},success:function(e){$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")}),n.success(e)},error:function(e){$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")}),notificate("Thông báo","Có lỗi xảy ra. Vui lòng thử lại!",[{btn:"red",text:"Đóng",attr:"data-popup_close"}])}})}function loadAjaxFormdata(e,t,n){var a={beforeSend:function(){},success:function(e){},error:function(e){}};$.extend(a,n),$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},type:"POST",url:e,data:t,enctype:"multipart/form-data",processData:!1,contentType:!1,beforeSend:function(){$("#loading_box").css({visibility:"visible",opacity:0}).animate({opacity:1},200),a.beforeSend()},success:function(e){$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")}),a.success(e)},error:function(e){$("#loading_box").animate({opacity:0},200,function(){$("#loading_box").css("visibility","hidden")}),notificate("Thông báo","Có lỗi xảy ra. Vui lòng thử lại!",[{btn:"red",text:"Đóng",attr:"data-popup_close"}]),a.error(e)}})}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function validatePhone(e){var t=!1;return e=e.trim(),e=e.replace("(+84)","0"),e=e.replace("+84","0"),e=e.replace("0084","0"),""!=(e=e.replace(/ /g,""))&&(t=e.length>=9&&e.length<=11),t}function setCookie(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),document.cookie=e+"="+t+";path=/;expires="+a.toUTCString()}function setCookieWithPath(e,t,n,a){var o=new Date;o.setTime(o.getTime()+24*a*60*60*1e3),document.cookie=e+"="+n+";path="+t+";expires="+o.toUTCString()}function getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}function deleteCookie(e,t){var n=new Date;n.setTime(n.getTime()-1),document.cookie=e+"=; path="+t+"; expires="+n.toUTCString()}function update_url(e){history.pushState(null,null,e)}function pushOrUpdate(e){var t=new URL(window.location.href);$.each(e,function(e,n){t.searchParams.set(e,n)});update_url(t.href)}function checkValue(e,t){for(var n=!1,a=0;a<t.length;a++){if(t[a]==e){n=!0;break}}return n}function check_empty(e){return null==e||("null"==e||(void 0==e||""==e))}function fixedSidebar(e,t,n){$("*[data-active_after]").length>0?topSpacing=60:topSpacing=10;new StickySidebar(e,{topSpacing:topSpacing,bottomSpacing:10,containerSelector:t,innerWrapperSelector:n})}function countdown(e){var t=new Date(e.replace(" ","T")).getTime();t/=1e3;var n=(new Date).getTime(),a=t-(n/=1e3),o=Math.floor(a/86400),i=Math.floor((a-86400*o)/3600),c=Math.floor((a-86400*o-3600*i)/60),l=Math.floor(a-86400*o-3600*i-60*c);return i<"10"&&(i="0"+i),c<"10"&&(c="0"+c),l<"10"&&(l="0"+l),{days:o,hours:i,minutes:c,seconds:l}}function addTinyMCE(e,t){id=e.replace("#",""),tinyMCE.execCommand("mceRemoveEditor",!1,id),check_empty(t)&&(t=100),tinymce.init({path_absolute:"/",selector:e,branding:!1,hidden_input:!1,relative_urls:!1,convert_urls:!1,height:t,entity_encoding:"raw",plugins:["link","media"],wordcount_countregex:/[\w\u2019\x27\-\u00C0-\u1FFF]+/g,language:"vi_VN",wordcount_cleanregex:/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g,menubar:!1,statusbar:!1,toolbar:"bold italic underline link"})}function addTinyUploadContent(e,t,n=0){id=e.replace("#",""),tinyMCE.execCommand("mceRemoveEditor",!1,id),check_empty(t)&&(t=100),tinymce.init({path_absolute:"/",selector:e,branding:!1,hidden_input:!1,relative_urls:!1,convert_urls:!1,height:t,entity_encoding:"raw",plugins:["link","lists","fullscreen","autosave","image","code"],wordcount_countregex:/[\w\u2019\x27\-\u00C0-\u1FFF]+/g,language:"vi_VN",wordcount_cleanregex:/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g,menubar:!1,statusbar:!1,toolbar:"bold italic underline strikethrough | removeformat | link imageupload | code",fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 22px 24px 26px 28px 30px 32px 36px 40px 46px 52px 60px",autosave_retention:"30m",autosave_prefix:"tinymce-autosave-{path}{query}-{id}-",block_formats:"Paragraph=p;Heading 2=h2;Heading 3=h3;Heading 4=h4;",setup:function(e){initImageUpload(e,n)}})}function addTinyUploadContentV2(e,t,n=0){id=e.replace("#",""),tinyMCE.execCommand("mceRemoveEditor",!1,id),check_empty(t)&&(t=100),tinymce.init({path_absolute:"/",selector:e,content_css:"/assets/css/css-content.min.css,https://pro.fontawesome.com/releases/v5.12.0/css/all.css",branding:!1,hidden_input:!1,relative_urls:!1,convert_urls:!1,height:t,force_p_newlines:!0,entity_encoding:"raw",plugins:["link","lists","fullscreen","autosave","image","toc","code","paste","table"],external_plugins:{fontawesome:"/assets/libs/tinymce/plugins/fontawesome/plugin.min.js"},wordcount_countregex:/[\w\u2019\x27\-\u00C0-\u1FFF]+/g,valid_elements:"*[*]",language:"vi_VN",wordcount_cleanregex:/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g,menubar:!1,statusbar:!1,fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 22px 24px 26px 28px 30px 32px 36px 40px 46px 52px 60px",toolbar:"styleselect fontsizeselect | bold italic underline | removeformat | link imageupload | alignleft aligncenter alignright alignjustify | bullist numlist | fullscreen toc | code | table | chanh_price_trade",fontsize_formats:"8px 9px 10px 11px 12px 13px 14px 15px 16px 17px 18px 19px 20px 22px 24px 26px 28px 30px 32px 36px 40px 46px 52px 60px",autosave_retention:"30m",autosave_prefix:"tinymce-autosave-{path}{query}-{id}-",block_formats:"Paragraph=p;Heading 2=h2;Heading 3=h3;Heading 4=h4;",paste_as_text:!0,setup:function(e){initImageUpload(e,n),initPriceTrade(e)}})}function initImageUpload(t,n=0){t.addButton("imageupload",{text:"",icon:"image",onclick:function(e){$("#media").attr("editor_id","detail").data("editor_id","detail").addClass("open")}}),$("body").on("change","#tinymce_file",function(){e=$(this);var a=e.get(0);if(allowed_size=parseInt($("meta[name=max-filesize]").attr("content")),a.files[0].size<allowed_size){var o=new FormData;o.append("files",a.files[0]),url="/ajax/upload_file?wtm="+n,loadAjaxFormdata(url,o,{beforeSend:function(){},success:function(n){1==n.status?(image='<figure class="sudo-media-item"><img src="'+n.image_link+'"/></figure><p></p>',t.insertContent(image),e.closest(".popup").removeClass("open")):notificate("Thông báo",n.message,[{btn:"red",text:"Đóng",attr:"data-popup_close"}])},error:function(e){}}),e.val("")}else e.val(""),notificate("Thông báo","Các File phải có kích thước nhỏ hơn "+formatSizeUnits(allowed_size),[{btn:"red",text:"Đóng",attr:"data-popup_close"}])}),$("body").on("click","#tinymce_file_btn",function(e){e.preventDefault(),e=$(this),src=$(this).closest(".media-uploadurl").find("#tinymce_file_url").val();var n=new Image;n.src=src,n.onerror=function(){notificate("Thông báo","Không xác định được ảnh. Vui lòng thử lại!",[{btn:"red",text:"Đóng",attr:"data-popup_close"}])},n.onload=function(){image='<figure class="sudo-media-item"><img src="'+src+'"/></figure><p></p>',t.insertContent(image),e.closest(".popup").removeClass("open"),e.closest(".media-uploadurl").find("#tinymce_file_url").val("")}})}function initPriceTrade(editor){editor.addButton("chanh_price_trade",{text:"Ưu đãi tốt nhất",icon:!1,stateSelector:".review-top",onclick:function(){state=this.active(),note_box="",data_fields=[{label:"Lazada",name:"lazada",name_value:"",price:"",link:"",disabled_name:!0},{label:"Shopee",name:"shopee",name_value:"",price:"",link:"",disabled_name:!0},{label:"Tiki",name:"tiki",name_value:"",price:"",link:"",disabled_name:!0},{label:"Điện máy xanh",name:"dien_may_xanh",name_value:"",price:"",link:"",disabled_name:!0},{label:"Sàn khác 1",name:"san_khac_1",name_value:"",price:"",link:"",disabled_name:!1},{label:"Sàn khác 2",name:"san_khac_2",name_value:"",price:"",link:"",disabled_name:!1}],state&&(row=tinymce.activeEditor.selection.getNode().closest(".review-top"),note_box=$(row).find(".review-top__note").find(".text-note").html(),$.each($(row).find(".item"),function(){stt=$(this).data("stt"),data_fields[stt].name_value=$(this).find("a").data("name"),data_fields[stt].link=$(this).find("a").attr("href"),data_fields[stt].price=$(this).find(".price-detail").html().replace(/\D/g,"")})),$field_trade=[],$field_trade.push({type:"container",label:"Ảnh hiển thị box:",html:'<img src="https://cdn.chanhtuoi.com/uploads/2021/03/box-uu-dai.png" style="width: 100%; height: 150px; object-fit: contain;">'}),$field_trade.push({type:"container",label:"Lưu ý:",html:"Để chỉnh sửa vui lòng chọn vùng nhập Ưu đãi tốt nhất và click vào nút <b>Ưu đãi tốt nhất</b> trên thanh công cụ."}),$field_trade.push({type:"container",label:" ",html:"Xóa thẻ nếu để <b>Giá</b> là trống. Xóa Box khi toàn bộ <b>Giá</b> để trống."}),$field_trade.push({type:"container",label:" ",html:"Tên 4 sàn mặc định sẽ điền: Lazada, Shopee, Tiki, Điện máy xanh; Tên các sàn khác sẽ <b>viết hoa</b> chữ cái đầu tiên và viết liền không dấu.<p>VD: Nguyễn Kim: Nguyenkim</p>"}),$.each(data_fields,function(e,t){$field_trade.push({type:"textbox",minWidth:500,name:"trade_name_"+t.name,label:t.label,value:e<4?t.label:t.name_value,placeholder:"VD: "+t.label,disabled:t.disabled_name}),$field_trade.push({type:"textbox",minWidth:500,name:"trade_price_"+t.name,label:" ",value:t.price,placeholder:"Giá sản phẩm. VD: 100000"}),$field_trade.push({type:"textbox",minWidth:500,name:"trade_link_"+t.name,label:" ",value:t.link,placeholder:"Link sản phẩm"})}),$field_trade.push({type:"textbox",minWidth:500,name:"note_box",label:"Ghi chú",value:note_box}),editor.windowManager.open({title:"Ưu đãi tốt nhất",autoScroll:!0,width:1e3,height:500,body:$field_trade,onsubmit:function(e){data_value=e.data,row=tinymce.activeEditor.selection.getNode().closest(".review-top"),item_html="",$.each(data_fields,function(index,item){name_value=eval("data_value.trade_name_"+item.name),price=eval("data_value.trade_price_"+item.name),link=eval("data_value.trade_link_"+item.name),""!=price&&(item_html+=`\n                                <div class="item" data-stt="${index}">\n                                    <p class="price-detail">${formatPrice(price,"Miễn phí","")} VNĐ</p>\n                                    <a href="${link}" data-name="${name_value}" rel="nofollow" target="_blank">Xem tại ${name_value}</a>\n                                </div>\n                            `)}),""!=item_html?(html=`\n                            <div class="review-top chanh_price_trade">\n                                <div class="review-top__price">\n                                    <div class="left">Ưu đãi tốt nhất</div>\n                                    <div class="right">${item_html}</div>\n                                </div>\n                                <div class="review-top__note">\n                                    <div class="icon-note"><i class="fa fa-info-circle" aria-hidden="true"></i></div>\n                                    <div class="conent-text text-note">${data_value.note_box}</div>\n                                </div>\n                            </div>\n                            <p></p>\n                        `,row&&$(row).remove(),editor.insertContent(html)):alert("Không xác định được nội dung box!")}})}})}function formatSizeUnits(e){return e>=1073741824?e=(e/1073741824).toFixed(0)+"GB":e>=1048576?e=(e/1048576).toFixed(0)+"MB":e>=1024?e=(e/1024).toFixed(0)+"KB":e>1?e+=" bytes":1==e?e+=" byte":e="0 bytes",e}function copyToClipboard(e,t=!1){if(navigator.clipboard)navigator.clipboard.writeText(e);else{var n=$("<input>");$("body").append(n),n.val(e).select(),document.execCommand("copy")||Clipboard.copy(e),n.remove()}t&&window.open(t,"_blank")}function convertToSlug(e){return slug=e.toLowerCase(),slug=slug.replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a"),slug=slug.replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e"),slug=slug.replace(/i|í|ì|ỉ|ĩ|ị/gi,"i"),slug=slug.replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o"),slug=slug.replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u"),slug=slug.replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y"),slug=slug.replace(/đ/gi,"d"),slug=slug.replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,""),slug=slug.replace(/ /gi,"-"),slug=slug.replace(/\-\-\-\-\-/gi,"-"),slug=slug.replace(/\-\-\-\-/gi,"-"),slug=slug.replace(/\-\-\-/gi,"-"),slug=slug.replace(/\-\-/gi,"-"),slug="@"+slug+"@",slug=slug.replace(/\@\-|\-\@|\@/gi,""),slug}function notificate(e,t,n){$(".notificate-header p").html(e),$(".notificate-body p").html(t),footer_str="",$.each(n,function(e,t){footer_str+='<button type="button" class="btn btn-'+t.btn+'" '+t.attr+">"+t.text+"</button>"}),$(".notificate-footer").html(footer_str),$("#notificate").addClass("open")}function loadCoupon(e){push="?load=true",cate=$("*[data-coupon_cate].active").data("coupon_cate"),""!=cate&&(push+="&cate="+cate),$("*[data-coupon_order].active").length>0&&(order=$("*[data-coupon_order].active").data("coupon_order"),push+="&order="+order),keyword=$("*[data-coupon_search]").parent().find("input").val();try{url=new URL(keyword),keyword=encodeURIComponent(keyword)}catch(e){}keyword.length>0&&(push+="&ckeyword="+keyword),null==e&&(e=1),e>=1&&(push+="&pageCoupon="+e),update_url(push),url_load=window.location.href+"&ajax=true",data={},loadAjaxGet(url_load,{beforeSend:function(){},success:function(e){$(".chanhtuoi-code").html(e.code),$("*[data-coupon_paginate]").html(e.paginate),"mobile"==$("meta[name=agent]").attr("content")?top_box=160:$(".box-top").length>0?top_box=50:top_box=0,$("html, body").animate({scrollTop:parseInt($(".coupons-code").offset().top)-top_box},500),$(".chanhtuoi-code").change()},error:function(e){}})}function loadPost(e){push="?",null==e&&(e=1),e>=1&&(push+="&pagePost="+e),update_url(push),url_load=window.location.href,loadAjax(url_load,{},{beforeSend:function(){},success:function(e){$(".chanhtuoi-posts .chanhtuoi-news").html(e.html),$(".chanhtuoi-posts .chanhtuoi-review").html(e.html),$(".chanhtuoi-posts .pagination-box").html(e.paginate),"mobile"==$("meta[name=agent]").attr("content")?top_box=100:$(".box-top").length>0?top_box=50:top_box=0,$("html, body").animate({scrollTop:parseInt($(".components").offset().top)-top_box},500),lazyload(),$("#scrolling_child").length>0&&fixedSidebar("#scrolling_child",".scrolling_box",".scrolling_item")},error:function(e){}})}function loadDeal(e){push="?",null==e&&(e=1),e>=1&&(push+="&page="+e),update_url(push),url_load=window.location.href,loadAjax(url_load,{},{beforeSend:function(){},success:function(e){$(".chanhtuoi-deals .chanhtuoi-deal").html(e.html),$(".chanhtuoi-deals .pagination-box").html(e.paginate),"mobile"==$("meta[name=agent]").attr("content")?top_box=100:$(".box-top").length>0?top_box=50:top_box=0,$("html, body").animate({scrollTop:parseInt($(".components").offset().top)-top_box},500),lazyload()},error:function(e){}})}function tabs(e,t,n){$("."+t).hide(),$("ul."+e+" li:first").addClass("active").fadeIn(),$("."+t+":first").fadeIn(),$("ul."+e+" li").on("click",function(n){n.preventDefault(),$("ul."+e+" li").removeClass("active"),$(this).addClass("active");var a=$(this).find("a").attr("href");$("."+t).hide(),$(a).fadeIn()})}function format_price(e){if(0==e)return"Miễn phí";e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1.$2");return e=x1+x2+"đ"}function checkImageUpload(e,t){inp=$(e),t=$(t),allowed_size=parseInt($("meta[name=max-filesize]").attr("content")),inp.on("change",function(){var e=inp.get(0);e.files[0].size>allowed_size?(inp.val(""),notificate("Thông báo","Các File phải có kích thước nhỏ hơn "+formatSizeUnits(allowed_size),[{btn:"red",text:"Đóng",attr:"data-popup_close"}])):(image_preview=URL.createObjectURL(e.files[0]),t.attr("src",image_preview),$("*[data-preview_image]").attr("src",image_preview))})}function uploadFile(e,t,n){inp=$(e),image_id=$(t),input_id=$(n),$(inp).on("change",function(){var e=inp.get(0);if(allowed_size=parseInt($("meta[name=max-filesize]").attr("content")),e.files[0].size<allowed_size){var t=new FormData;t.append("files",e.files[0]),url="/ajax/upload_file",loadAjaxFormdata(url,t,{beforeSend:function(){},success:function(e){1==e.status?(image_id.attr("src",e.image_link),input_id.val(e.image_link),input_id.change()):(input_id.change(),notificate("Thông báo",e.message,[{btn:"red",text:"Đóng",attr:"data-popup_close"}]))},error:function(e){}}),inp.val("")}else inp.val(""),notificate("Thông báo","Các File phải có kích thước nhỏ hơn "+formatSizeUnits(allowed_size),[{btn:"red",text:"Đóng",attr:"data-popup_close"}])})}function coudown_timer(){$("*[data-countdown]").length>0&&setInterval(function(){$("*[data-countdown]").each(function(){time=$(this).data("countdown"),check_empty(time)||(time_countdown=countdown(time),time_countdown.days>0?$(this).html("Còn "+time_countdown.days+" ngày"):0==time_countdown.days&&time_countdown.hours>=0&&time_countdown.minutes>=0&&time_countdown.seconds>=0?$(this).html('Còn <span class="hours">'+time_countdown.hours+'</span>:<span class="minute">'+time_countdown.minutes+'</span>:<span class="seconds">'+time_countdown.seconds+"</span>"):$(this).html("Hết hạn"))})},1e3)}function bind_click(e){$(document).bind("click",function(t){$(t.target).parent("ul").parent().hasClass(e)||$("."+e).css("display","none")})}function format_price_form(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1.$2");return e=x1+x2}function notifyTitle(){notify_number=$(".auth-info__notification-icon .number").text(),0!=notify_number&&$("title").prepend("("+notify_number+") ")}function lazyload(){}function couponItem(){$("body").on("click","*[data-copy_coupon]",function(e){e.preventDefault(),e=$(this),type=e.data("type"),type_id=e.data("type_id"),code=$(this).parent().find("input").val(),copyToClipboard(code),e.html('<i class="fa fa-cut"></i>Đã Copy'),$(".code[data-type="+type+"][data-type_id="+type_id+"]").find(".code-text").html("Đã lấy mã"),e.closest(".coupon-popup__top-code").find("span").html("Đã lấy mã"),setTimeout(function(){href=e.closest(".popup").find(".coupon-popup__top-buynow").find("a").attr("href"),window.open(href,"_blank")},1e3)}),$("body").on("click","#coupon_item_detail .coupon-popup__top-vote .coupon-popup__top-vote__icon",function(e){e.preventDefault(),$(this).hasClass("yes")?($(this).find(".fa").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-up"),$(this).parent().find(".fa-thumbs-down").removeClass("fa-thumbs-down").addClass("fa-thumbs-o-down")):($(this).find(".fa").removeClass("fa-thumbs-o-down").addClass("fa-thumbs-down"),$(this).parent().find(".fa-thumbs-up").removeClass("fa-thumbs-up").addClass("fa-thumbs-o-up"))}),$("body").on("click","*[data-share_coupon]",function(e){e.preventDefault(),e=$(this),share_link=$(this).data("share_coupon"),coupon_item_id=$(this).data("id"),$.ajaxSetup({cache:!0}),$.getScript("https://connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"1430862797326117",version:"v2.3"}),FB.ui({method:"share",href:share_link},function(t){t&&!t.error_code&&loadAjax("/ajax/update_used_coupon_items",{coupon_item_id:coupon_item_id},{beforeSend:function(){},success:function(t){$(".coupon-popup__top-code").css("display","block"),e.closest(".coupon-popup__top-code").css("display","none")},error:function(e){}})})})})}function offerItem(){$("body").on("click","*[data-copy_coupon]",function(e){e.preventDefault(),e=$(this),code=$(this).parent().find("input").val(),copyToClipboard(code),e.html('<i class="fa fa-cut"></i>Đã Copy'),setTimeout(function(){e.html('<i class="fa fa-cut"></i>Copy')},2e3)}),$("body").on("click",".offer .offer-content__top-vote .offer-content__top-vote__icon",function(e){e.preventDefault(),$(this).hasClass("yes")?($(this).find(".fa").removeClass("fa-thumbs-o-up").addClass("fa-thumbs-up"),$(this).parent().find(".fa-thumbs-down").removeClass("fa-thumbs-down").addClass("fa-thumbs-o-down")):($(this).find(".fa").removeClass("fa-thumbs-o-down").addClass("fa-thumbs-down"),$(this).parent().find(".fa-thumbs-up").removeClass("fa-thumbs-up").addClass("fa-thumbs-o-up"))}),$("body").on("click","*[data-share_coupon]",function(e){e.preventDefault(),e=$(this),share_link=$(this).data("share_coupon"),coupon_item_id=$(this).data("id"),$.ajaxSetup({cache:!0}),$.getScript("https://connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"1430862797326117",version:"v2.3"}),FB.ui({method:"share",href:share_link},function(t){t&&!t.error_code&&loadAjax("/ajax/update_used_coupon_items",{coupon_item_id:coupon_item_id},{beforeSend:function(){},success:function(t){$(".offer-content__top-code").css("display","block"),e.closest(".offer-content__top-code").css("display","none")},error:function(e){}})})})})}function formatPrice(e,t="Miễn phí",n="đ"){if(""==e)return"";if(0==e&&""!=t)return t;e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var a=/(\d+)(\d{3})/;a.test(x1);)x1=x1.replace(a,"$1.$2");return e=x1+x2+n}function preventDoubleSubmit(e){var t=!0;$(e).length&&$("body").on("click",`${e} button[type="submit"]`,function(n){if(!t)return!1;t=!1;let a=$(this);a.html(`<i class="fa fa-spinner fa-spin"></i> ${a.html()}`),$(`${e} button[type="submit"]`).css("opacity",.7)})}$(window).off("popstate").on("popstate",function(){window.location.reload()});var getUrlParameter=function(e,t){var n=new RegExp("[?&]"+t+"=([^&#]*)").exec(e);return null==n?null:decodeURI(n[1])||0};window.Clipboard=function(e,t,n){function a(){var a,i;n.userAgent.match(/ipad|iphone/i)?((a=t.createRange()).selectNodeContents(o),(i=e.getSelection()).removeAllRanges(),i.addRange(a),o.setSelectionRange(0,999999)):o.select()}var o,i;return i=function(e){!function(e){(o=t.createElement("textArea")).value=e,t.body.appendChild(o)}(e),a(),t.execCommand("copy"),t.body.removeChild(o)},{copy:i}}(window,document,navigator);